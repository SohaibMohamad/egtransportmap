<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Egypt Transport Map</title>
  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
  <link href="https://fonts.googleapis.com/css2?family=Rubik:wght@400;500&display=swap" rel="stylesheet" />
  <style>
    html, body {
      margin: 0;
      height: 100%;
      font-family: 'Rubik', sans-serif;
    }

    body.dark {
      background: #121212;
      color: #eee;
    }

    #map {
      height: 100%;
      width: 100%;
    }

    .glass {
      background: rgba(255, 255, 255, 0.15);
      backdrop-filter: blur(10px);
      border-radius: 12px;
      border: 1px solid rgba(255, 255, 255, 0.2);
    }

    .logo-container {
      position: absolute;
      top: 10px;
      left: 50%;
      transform: translateX(-50%);
      z-index: 1003;
    }

    .logo-container img {
      max-height: 100px;
      padding: 6px 12px;
      background: rgba(255,255,255,0.6);
      border-radius: 12px;
      box-shadow: 0 2px 6px rgba(0, 0, 0, 0.15);
    }

    .top-right-buttons {
      position: absolute;
      top: 20px;
      right: 20px;
      display: flex;
      flex-direction: column;
      gap: 10px;
      z-index: 1002;
    }

    .top-right-buttons button {
      padding: 8px 14px;
      font-size: 14px;
      border: none;
      cursor: pointer;
      border-radius: 10px;
    }

    .icon-menu {
      position: absolute;
      bottom: 20px;
      left: 20px;
      display: grid;
      grid-template-columns: repeat(3, 50px);
      gap: 10px;
      z-index: 1002;
      padding: 10px;
    }

    .icon-menu button {
      width: 50px;
      height: 50px;
      font-size: 22px;
      border: none;
      border-radius: 10px;
      background: rgba(255, 255, 255, 0.3);
      cursor: pointer;
    }

    .menu-panel {
      position: absolute;
      bottom: 90px;
      left: 20px;
      width: 320px;
      height: 255px;
      display: none;
      flex-direction: column;
      background: white;
      border-radius: 12px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
      z-index: 1003;
      overflow: hidden;
    }

    .menu-header-bar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 10px 14px;
      font-weight: bold;
      background: #f5f5f5;
      border-bottom: 1px solid #ddd;
      border-top-left-radius: 12px;
      border-top-right-radius: 12px;
    }

    .close-btn {
      background: #e53935;
      color: white;
      border: none;
      border-radius: 50%;
      width: 28px;
      height: 28px;
      font-size: 16px;
      cursor: pointer;
    }

    .search-box {
      padding: 6px 12px;
      border: 1px solid #ccc;
      border-radius: 6px;
      font-size: 13px;
      width: calc(100% - 24px);
      margin: 6px auto;
      display: block;
    }

    .menu-content-panel {
      flex: 1;
      overflow-y: auto;
      padding: 8px 10px;
    }

    details {
      background: #fafafa;
      border: 1px solid #ddd;
      border-radius: 8px;
      padding: 6px;
      margin-bottom: 6px;
    }

    summary {
      font-weight: 500;
      cursor: pointer;
      font-size: 14px;
    }

    .route-card {
      background: rgba(255, 255, 255, 0.7);
      padding: 8px;
      border-radius: 8px;
      display: flex;
      flex-direction: column;
      gap: 6px;
      margin-top: 6px;
    }

    .route-btn {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 6px;
    }

    .route-btn button {
      flex: 1;
      padding: 6px;
      color: white;
      border: none;
      border-radius: 6px;
      font-size: 13px;
      cursor: pointer;
    }

    .pin-btn {
      width: 35px;
      background: #ff9800;
    }

    .pin-btn.pinned {
      background: #4caf50;
    }

    .like-btn {
      width: 35px;
      background: #e91e63;
    }

    .route-description {
      font-size: 12px;
      color: black;
      direction: rtl;
    }

    .menu-content-panel::-webkit-scrollbar {
      width: 6px;
    }

    .menu-content-panel::-webkit-scrollbar-thumb {
      background: rgba(0, 0, 0, 0.3);
      border-radius: 4px;
    }

    .like-btn.liked {
     background: #a31545;
    }

    function showLikedRoutes() {
  document.getElementById('menu-title').textContent = '‚ù§Ô∏è Liked Routes';
  document.getElementById('menu-panel').style.display = 'flex';
  renderLikedRoutes();
}

function renderLikedRoutes() {
  const contentPanel = document.getElementById('menu-content-panel');
  contentPanel.innerHTML = '';
  const routesArr = Object.values(likedRoutes);

  if (routesArr.length === 0) {
    contentPanel.innerHTML = '<div style="padding:20px;text-align:center;">No liked routes yet.</div>';
    return;
  }

  const details = document.createElement('details');
  details.open = true;
  const summary = document.createElement('summary');
  summary.textContent = "Liked";
  details.appendChild(summary);

  routesArr.forEach(route => {
    const card = document.createElement('div');
    card.className = 'route-card';

    const btnRow = document.createElement('div');
    btnRow.className = 'route-btn';

    const routeBtn = document.createElement('button');
    routeBtn.textContent = route.name;
    routeBtn.style.background = route.color;
    routeBtn.onclick = () => showSingleRoute(route.id);

    const pinBtn = document.createElement('button');
    pinBtn.textContent = 'üìå';
    pinBtn.className = 'pin-btn';
    pinBtn.onclick = () => togglePin(pinBtn, route.id);

    const likeBtn = document.createElement('button');
    likeBtn.textContent = '‚ù§Ô∏è';
    likeBtn.className = 'like-btn liked';
    likeBtn.onclick = () => {
      toggleLike(route);
      renderLikedRoutes(); // Refresh after unlike
    };

    btnRow.appendChild(routeBtn);
    btnRow.appendChild(pinBtn);
    btnRow.appendChild(likeBtn);

    const desc = document.createElement('div');
    desc.className = 'route-description';
    desc.textContent = route.description;

    card.appendChild(btnRow);
    card.appendChild(desc);
    details.appendChild(card);
  });

  contentPanel.appendChild(details);
}

    @media (max-width: 768px) {
      .menu-panel {
        width: 90%;
        left: 5%;
      }
    }
  </style>
</head>
<body>

<div class="logo-container">
  <img src="A6VKOY3fhn0O0jaKpdAT--1--o1p35-removebg-preview.png" alt="Egypt Transport Map Logo" />
</div>

<div id="map"></div>

<div class="top-right-buttons glass">
  <button onclick="locateMe()">üìç Locate Me</button>
  <button onclick="toggleTheme()">üåó Theme</button>
  <button onclick="showLikedRoutes()">‚ù§Ô∏è Liked Routes</button>
</div>

<div class="icon-menu glass">
  <button onclick="openMenu('bus')">
  <img src="pbus.png" alt="Bus" style="width: 30px; height: 30px;" />
  </button>
  <button onclick="openMenu('brt')">
  <img src="brt.png" alt="Bus" style="width: 30px; height: 30px;" />
  </button>
  <button onclick="openMenu('cta')">
  <img src="buss.png" alt="Bus" style="width: 30px; height: 30px;" />
  </button>
  <button onclick="openMenu('metro')">
  <img src="metro.png" alt="Bus" style="width: 30px; height: 30px;" />
  </button>
  <button onclick="openMenu('tram')">
  <img src="tram.png" alt="Bus" style="width: 30px; height: 30px;" />
  </button>
  <button onclick="openMenu('mini')">
  <img src="mini.png" alt="Bus" style="width: 30px; height: 30px;" />
  </button>
  <button onclick="openMenu('micro')">
  <img src="micro.png" alt="Bus" style="width: 30px; height: 30px;" />
  </button>
  <button onclick="openMenu('monorail')">
  <img src="monorail.png" alt="Bus" style="width: 30px; height: 30px;" />
  </button>
  <button onclick="openMenu('hst')">
  <img src="hst.png" alt="Bus" style="width: 30px; height: 30px;" />
  </button>
  <button onclick="openMenu('lrt')">
  <img src="lrt.png" alt="Bus" style="width: 30px; height: 30px;" />
  </button>
</div>

<div class="menu-panel" id="menu-panel">
  <div class="menu-header-bar">
    <span id="menu-title">Transport</span>
    <button class="close-btn" onclick="closeMenu()">√ó</button>
  </div>
  <input type="text" class="search-box" placeholder="Search..." oninput="filterRoutes(this.value)" />
  <div class="menu-content-panel" id="menu-content-panel"></div>
</div>

<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
<script>
  const map = L.map('map').setView([30.0444, 31.2357], 11);
  const lightLayer = L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png');
  const darkLayer = L.tileLayer('https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png');
  lightLayer.addTo(map);
  let likedRoutes = {};

  const routes = {
    bus1: [[29.92431, 31.03046], [29.92777, 31.03586], [29.92917, 31.03846], [29.92911, 31.0395], [29.92951, 31.04045], [29.93076, 31.04192], [29.93165, 31.04257], [29.93242, 31.04326], [29.93238, 31.04358], [29.93222, 31.04393], [29.93217, 31.0441], [29.93223, 31.04438], [29.93225, 31.04472], [29.93266, 31.04455], [29.93297, 31.0445], [29.93313, 31.04452], [29.93351, 31.04478], [29.93602, 31.04853], [29.94228, 31.05821], [29.94492, 31.06231], [29.94632, 31.0645], [29.94786, 31.06683], [29.94818, 31.06734], [29.95287, 31.07461], [29.95366, 31.07572], [29.95519, 31.07696], [29.95573, 31.07864], [29.95448, 31.08104], [29.94958, 31.09276], [29.94734, 31.09817], [29.94683, 31.09941], [29.9455, 31.10269], [29.94498, 31.10323], [29.94426, 31.1033], [29.94377, 31.10278], [29.94367, 31.10217], [29.9439, 31.10158], [29.94432, 31.10129], [29.94534, 31.1015], [29.94876, 31.10341], [29.9549, 31.1058], [29.95784, 31.1078], [29.95979, 31.10868], [29.96343, 31.10896], [29.96653, 31.10891], [29.96973, 31.10858], [29.97129, 31.10894], [29.97607, 31.11164], [29.97872, 31.11453], [29.98076, 31.11837], [29.98244, 31.12176], [29.98415, 31.12395], [29.98782, 31.12805], [29.98802, 31.12975], [29.98747, 31.13142], [29.98713, 31.13293], [29.98651, 31.13389], [29.98577, 31.13464], [29.98487, 31.13609], [29.98581, 31.13851], [29.98709, 31.14117], [29.9875, 31.14101], [29.98834, 31.14026], [29.98888, 31.13917], [29.98989, 31.13527], [29.99001, 31.13518], [29.99011, 31.13514], [29.99029, 31.13517], [29.99154, 31.13887], [29.99185, 31.14023], [29.99206, 31.14123], [29.99244, 31.14372], [29.99368, 31.14738], [29.99448, 31.14897], [29.99552, 31.15167], [29.99651, 31.15471], [29.99808, 31.15899], [29.99854, 31.16021], [29.99986, 31.16384], [30.00147, 31.16794], [30.00225, 31.17002], [30.00617, 31.18023], [30.00874, 31.18686], [30.00964, 31.18921], [30.01117, 31.19314], [30.01272, 31.19715], [30.01359, 31.19912], [30.01456, 31.20131], [30.01477, 31.20309], [30.01473, 31.20459], [30.01475, 31.20516], [30.01449, 31.20568], [30.01429, 31.20646], [30.01465, 31.20928], [30.01475, 31.20989], [30.01527, 31.21187], [30.01533, 31.21196], [30.01544, 31.21206], [30.01549, 31.21208], [30.01559, 31.21213], [30.01569, 31.21215], [30.01644, 31.21207], [30.01834, 31.21184], [30.02153, 31.2115], [30.02432, 31.2111], [30.02589, 31.21089], [30.02724, 31.21094], [30.02757, 31.21201], [30.02808, 31.2156], [30.02829, 31.21651], [30.02845, 31.21752], [30.02843, 31.22177], [30.02824, 31.22611], [30.0282, 31.22653], [30.02818, 31.22656], [30.02816, 31.22669], [30.02818, 31.22673], [30.02822, 31.22677], [30.02881, 31.22939], [30.02915, 31.2306], [30.02934, 31.23243], [30.02997, 31.23388], [30.02896, 31.23331], [30.02912, 31.23257], [30.03087, 31.23249], [30.03418, 31.23352], [30.03553, 31.23388], [30.03836, 31.23476], [30.04043, 31.23531], [30.04389, 31.23608], [30.04418, 31.23607], [30.04435, 31.23617], [30.0447, 31.23605], [30.04552, 31.23544], [30.0466, 31.23482], [30.04899, 31.23456], [30.05041, 31.23547], [30.05153, 31.23663], [30.05186, 31.23705], [30.05352, 31.2388], [30.0554, 31.24071], [30.05935, 31.24482], [30.06089, 31.24654], [30.06171, 31.2479], [30.06425, 31.25416], [30.06674, 31.2605], [30.06826, 31.26464], [30.06841, 31.26568], [30.06951, 31.26898], [30.07043, 31.27189], [30.07059, 31.27252], [30.07082, 31.27328], [30.07103, 31.27402], [30.07135, 31.27505], [30.07178, 31.27776], [30.07215, 31.27871], [30.07275, 31.27963], [30.07426, 31.28124], [30.07485, 31.28203], [30.07487, 31.28238], [30.0747, 31.28291], [30.07342, 31.28474], [30.0732, 31.28513], [30.07306, 31.28534], [30.07168, 31.28742], [30.07068, 31.28894], [30.06944, 31.29085], [30.06888, 31.29161], [30.06809, 31.29235], [30.06726, 31.29322], [30.06515, 31.29601], [30.0633, 31.29845], [30.06239, 31.29978], [30.06208, 31.30026], [30.06135, 31.30098], [30.0591, 31.30252], [30.05884, 31.3028], [30.05877, 31.30333], [30.06086, 31.30758], [30.06257, 31.31104], [30.06582, 31.3171], [30.06673, 31.32028], [30.06702, 31.32286], [30.066, 31.32497], [30.0644, 31.3253], [30.0626, 31.32554], [30.05668, 31.32643], [30.05226, 31.3271], [30.05151, 31.32726], [30.04535, 31.32868], [30.0404, 31.32974], [30.0403, 31.32974], [30.04028, 31.32977], [30.04026, 31.3298], [30.04024, 31.32988], [30.04026, 31.32994], [30.04028, 31.32995], [30.0403, 31.32998], [30.04042, 31.32997], [30.04086, 31.32985]],
    bus2: [[29.92432, 31.03049], [29.92777, 31.03586], [29.92917, 31.03846], [29.92911, 31.0395], [29.93031, 31.04124], [29.93118, 31.04239], [29.93212, 31.04287], [29.93243, 31.04339], [29.93233, 31.04372], [29.93219, 31.04402], [29.93219, 31.04428], [29.93233, 31.04464], [29.9324, 31.0448], [29.93295, 31.04448], [29.9331, 31.04453], [29.93324, 31.04448], [29.93602, 31.04853], [29.94159, 31.05718], [29.94469, 31.06191], [29.94591, 31.06377], [29.94722, 31.06584], [29.94808, 31.06717], [29.95106, 31.0717], [29.95366, 31.07572], [29.95519, 31.07696], [29.95573, 31.07864], [29.95448, 31.08104], [29.94901, 31.09424], [29.94715, 31.09875], [29.94644, 31.10043], [29.94517, 31.10309], [29.94465, 31.10334], [29.94398, 31.1031], [29.94367, 31.10243], [29.94378, 31.10178], [29.94416, 31.10136], [29.94506, 31.10132], [29.94788, 31.10285], [29.95425, 31.10558], [29.95663, 31.10682], [29.95931, 31.10853], [29.96324, 31.10896], [29.96653, 31.10891], [29.96973, 31.10858], [29.97129, 31.10894], [29.97607, 31.11164], [29.97872, 31.11453], [29.98076, 31.11837], [29.98245, 31.12178], [29.98604, 31.126], [29.98782, 31.12805], [29.98802, 31.12975], [29.98747, 31.13142], [29.98713, 31.13293], [29.98651, 31.13389], [29.98517, 31.1352], [29.98497, 31.13645], [29.98591, 31.13925], [29.98676, 31.14135], [29.98782, 31.14436], [29.98892, 31.14726], [29.98932, 31.14825], [29.98908, 31.14971], [29.98761, 31.15039], [29.98652, 31.15112], [29.98517, 31.15247], [29.98149, 31.15683], [29.97862, 31.16059], [29.97741, 31.16391], [29.97874, 31.16151], [29.9795, 31.16004], [29.98181, 31.15718], [29.98596, 31.15238], [29.98625, 31.15277], [29.98669, 31.15365], [29.98722, 31.15506], [29.98769, 31.15618], [29.98793, 31.15673], [29.98878, 31.15903], [29.98931, 31.16049], [29.99042, 31.16352], [29.99078, 31.16451], [29.99131, 31.16608], [29.99298, 31.17077], [29.99324, 31.17153], [29.99333, 31.17186], [29.99398, 31.17364], [29.99418, 31.17425], [29.99457, 31.17527], [29.99495, 31.17634], [29.99538, 31.17783], [29.99561, 31.1788], [29.99609, 31.18073], [29.9965, 31.18251], [29.99659, 31.18296], [29.99682, 31.18353], [29.99715, 31.18377], [29.99742, 31.18383], [29.99778, 31.18404], [29.99828, 31.18512], [29.99863, 31.18597], [29.99881, 31.18644], [30.00002, 31.18971], [30.00181, 31.19429], [30.00298, 31.19732], [30.00345, 31.19877], [30.00408, 31.20032], [30.00362, 31.19876], [30.00353, 31.19723], [30.00526, 31.19699], [30.00694, 31.19675], [30.01059, 31.20471], [30.01242, 31.20798], [30.0138, 31.20919], [30.01455, 31.20986], [30.01466, 31.21002], [30.01502, 31.21141], [30.0153, 31.21193], [30.01539, 31.21202], [30.01546, 31.21207], [30.01556, 31.21212], [30.01563, 31.21214], [30.0162, 31.2121], [30.01658, 31.21205], [30.02135, 31.21151], [30.0243, 31.2111], [30.02574, 31.2109], [30.02665, 31.21093], [30.02855, 31.21057], [30.03022, 31.21239], [30.03133, 31.21238], [30.0367, 31.21157], [30.03796, 31.21142], [30.03939, 31.21123], [30.0408, 31.21107], [30.04168, 31.2113], [30.04265, 31.21162], [30.04497, 31.21222], [30.04572, 31.21205], [30.04685, 31.21172], [30.04713, 31.21174], [30.04729, 31.21192], [30.04747, 31.21289], [30.04767, 31.21467], [30.04811, 31.21725], [30.04853, 31.21962], [30.04903, 31.22671], [30.04916, 31.23086], [30.04914, 31.23368], [30.0493, 31.23444], [30.05056, 31.23576], [30.05352, 31.2388], [30.0554, 31.24071], [30.05935, 31.24482], [30.06089, 31.24654], [30.06179, 31.24813], [30.06458, 31.25496], [30.06698, 31.26129], [30.06827, 31.26484], [30.06896, 31.26724], [30.07009, 31.27066], [30.07049, 31.27212], [30.0708, 31.27323], [30.071, 31.27384], [30.0716, 31.27669], [30.07196, 31.27805], [30.07225, 31.27872], [30.07292, 31.27968], [30.07432, 31.28115], [30.07485, 31.28203], [30.07487, 31.28238], [30.0747, 31.28291], [30.07454, 31.28329], [30.07374, 31.2845], [30.07378, 31.28514], [30.07532, 31.28691], [30.07787, 31.28953], [30.08019, 31.29184], [30.08355, 31.29523], [30.08495, 31.29669], [30.08595, 31.2981], [30.08615, 31.29862], [30.08649, 31.30293], [30.08679, 31.3084], [30.08712, 31.3089], [30.08822, 31.31003], [30.08956, 31.31135], [30.0907, 31.31317], [30.09015, 31.31505], [30.0894, 31.31679], [30.08623, 31.32198], [30.08555, 31.32317], [30.08465, 31.32464], [30.08447, 31.32506], [30.08424, 31.32647], [30.08431, 31.32738], [30.0842, 31.32852], [30.08383, 31.32859], [30.08306, 31.32836], [30.08138, 31.32725]],
    bus3: [[30.07, 31.16], [30.08, 31.17]],
    metro1: [[29.8489301, 31.3342604], [29.8492371, 31.3342819], [29.851303, 31.3340566], [29.8520195, 31.3337669], [29.8538619, 31.3323078], [29.8561323, 31.3301942], [29.862599, 31.3248941], [29.8694467, 31.3201198], [29.8753171, 31.3158712], [29.879029, 31.3134787], [29.8854756, 31.3100776], [29.8917357, 31.3068053], [29.8989256, 31.3031897], [29.9061149, 31.2996707], [29.913062, 31.2963018], [29.9185578, 31.2937483], [29.9202503, 31.2928149], [29.9237745, 31.2891457], [29.9260433, 31.287472], [29.9319011, 31.2842748], [29.9362431, 31.2817964], [29.9403432, 31.2792859], [29.942249, 31.2782237], [29.9440526, 31.2767002], [29.9467393, 31.2729773], [29.9491192, 31.26919], [29.9514339, 31.265156], [29.9529119, 31.2634072], [29.9555333, 31.2611649], [29.960274, 31.2577102], [29.9641593, 31.2549958], [29.9673938, 31.2526676], [29.9718365, 31.2493631], [29.9773293, 31.2454502], [29.9821432, 31.2421242], [29.9919749, 31.2350003], [29.995766, 31.2310091], [29.9992225, 31.2287561], [30.0061723, 31.2294857], [30.0081652, 31.2300596], [30.0102509, 31.2300543], [30.0166147, 31.2308804], [30.0202006, 31.2321464], [30.0249567, 31.2338201], [30.0294525, 31.2356225], [30.0371247, 31.2383477], [30.0441276, 31.2343565], [30.053563, 31.2387125], [30.0568875, 31.2420169], [30.0610847, 31.2460939], [30.0653932, 31.2558571], [30.0689587, 31.264526], [30.0704257, 31.2677447], [30.0723941, 31.2698475], [30.074251, 31.2720148], [30.0757736, 31.2742034], [30.0774262, 31.2778298], [30.0790602, 31.2821642], [30.0805457, 31.2861339], [30.0818826, 31.2873999], [30.0872113, 31.2940947], [30.0911845, 31.29903], [30.0946562, 31.3022486], [30.0978865, 31.3045017], [30.1014879, 31.3068191], [30.1060174, 31.3105742], [30.1097671, 31.3131277], [30.1120502, 31.313986], [30.1133124, 31.3140289], [30.1165606, 31.3135568], [30.1192519, 31.3132993], [30.1212193, 31.3137714], [30.1235579, 31.3151661], [30.1255252, 31.3161746], [30.1280678, 31.317505], [30.1310372, 31.3190714], [30.1342106, 31.3207237], [30.1369014, 31.3222043], [30.1393324, 31.3243929], [30.1414849, 31.3268391], [30.1432478, 31.3293067], [30.1458085, 31.3324825], [30.1475341, 31.3341562], [30.1495381, 31.3349072], [30.1520058, 31.3358084], [30.154826, 31.3363878], [30.1584625, 31.3374821], [30.1611527, 31.3376752], [30.1637315, 31.3384263]],
    metro2: [[29.9810118, 31.2121692], [29.9832421, 31.2105599], [29.9857512, 31.209487], [29.9860486, 31.2094441], [29.9878921, 31.2090077], [29.9971006, 31.2086107], [30.001226, 31.2084283], [30.0056857, 31.2081279], [30.0093556, 31.2076773], [30.0114552, 31.2067225], [30.0140751, 31.2051346], [30.0174009, 31.2039222], [30.0237178, 31.2020018], [30.0266624, 31.2010469], [30.0358487, 31.2001564], [30.0384122, 31.2120118], [30.0405113, 31.2222042], [30.0432975, 31.2269034], [30.0442634, 31.2348213], [30.045285, 31.244091], [30.0523244, 31.2467732], [30.0613506, 31.2461938], [30.0708586, 31.2450781], [30.0805144, 31.2452068], [30.0872914, 31.2452283], [30.0943464, 31.2454214], [30.1016423, 31.245357], [30.1034429, 31.2453785], [30.1043711, 31.2461509], [30.1050579, 31.246623], [30.105819, 31.2463441], [30.1066358, 31.2460007], [30.1075639, 31.2461938], [30.1099399, 31.2474599], [30.1139679, 31.2493052], [30.1152857, 31.2496271], [30.1162138, 31.2497773], [30.1176801, 31.2490477], [30.1224501, 31.2445202]],
    metro3: [[30.0254257, 31.2013608], [30.0376493, 31.1956101], [30.0439277, 31.1929923], [30.0531961, 31.2017685], [30.057282, 31.2012106], [30.0650263, 31.2024551], [30.0666048, 31.2130123], [30.0622221, 31.2232691], [30.055722, 31.2320453], [30.0534189, 31.2387401], [30.052286, 31.2467867], [30.0541247, 31.2558526], [30.0617207, 31.2668603], [30.0647292, 31.2747138], [30.0720644, 31.2834042], [30.0733085, 31.3008922], [30.0727514, 31.3170927], [30.0839461, 31.3290563], [30.0917069, 31.3263527], [30.101342, 31.3329187], [30.1084331, 31.3383475], [30.1165261, 31.3395277], [30.1190132, 31.3397852], [30.125435, 31.348733], [30.1275507, 31.3564363], [30.1280332, 31.3600412], [30.1287942, 31.3671008], [30.1309284, 31.373066], [30.1347513, 31.3836661], [30.1365143, 31.388537], [30.1403556, 31.394395], [30.1438256, 31.4047161], [30.1448462, 31.4078918], [30.1465162, 31.4212171], [30.0666048, 31.2130123], [30.0699996, 31.2045275], [30.0711138, 31.2017166], [30.071708, 31.2011802], [30.0723208, 31.2013089], [30.0732678, 31.2023603], [30.0758303, 31.2074887], [30.0763317, 31.2084543], [30.0769444, 31.2086903], [30.0791355, 31.2095486], [30.083406, 31.2108146], [30.0866181, 31.2117373], [30.090285, 31.2129604], [30.091139, 31.2132501], [30.0915475, 31.2131321], [30.0919002, 31.2126815], [30.0924664, 31.2112009], [30.093534, 31.2080573], [30.0957432, 31.2011265], [30.0964208, 31.1992704], [30.0969314, 31.1980044], [30.0974666, 31.1952225], [30.0975873, 31.1934737], [30.097439, 31.1904748], [30.0970213, 31.1863013], [30.0971605, 31.185164], [30.0973369, 31.1849173], [30.0976803, 31.1846276], [30.0982002, 31.1842092], [30.0986828, 31.1838658], [30.0993883, 31.1836191], [30.1000009, 31.1835225], [30.100646, 31.1835386], [30.1028969, 31.1837746]],
    metro4: [[29.9852052, 31.0711227], [29.9873797, 31.0759775], [29.9889641, 31.0798989], [29.990316, 31.0837531], [29.9890847, 31.0980815], [29.9889779, 31.0997605], [29.9888431, 31.1044168], [29.9911003, 31.1116319], [29.9914836, 31.1127128], [29.9930527, 31.1150921], [29.9944094, 31.1157895], [29.9970204, 31.1163045], [29.9980146, 31.1167766], [29.9982376, 31.1173667], [29.9979217, 31.1181928], [29.9968996, 31.1195339], [29.9954687, 31.1219264], [29.9942979, 31.1232997], [29.9921514, 31.1256171], [29.9899398, 31.1272908], [29.988834, 31.1283852], [29.9881557, 31.1304666], [29.9876074, 31.1316575], [29.9864923, 31.1338354], [29.9850612, 31.1357344], [29.9851542, 31.1374725], [29.9862182, 31.1400152], [29.9874587, 31.1431454], [29.9893312, 31.1480592], [29.9911014, 31.1529086], [29.9933036, 31.158552], [29.9970483, 31.1684118], [30.0003096, 31.1771558], [30.004119, 31.1872731], [30.0076403, 31.1967574], [30.0099443, 31.2030015], [30.0113472, 31.2064562], [30.0123691, 31.2078402], [30.0137905, 31.2090741], [30.014831, 31.2102757], [30.0156671, 31.2159191], [30.0159087, 31.2188266], [30.0158251, 31.2230537], [30.0159087, 31.2308214], [30.0159969, 31.2332408], [30.0157554, 31.2349574], [30.0153838, 31.2366552], [30.0154883, 31.238168]],
    mono1: [[30.071706, 31.3176411], [30.0700069, 31.3188427], [30.0678389, 31.3196849], [30.0662836, 31.3202106], [30.0634887, 31.3218092], [30.0611905, 31.3231664], [30.0602062, 31.3237136], [30.0581819, 31.324073], [30.0537245, 31.3248026], [30.052234, 31.3244914], [30.0518022, 31.3232683], [30.051245, 31.3214069], [30.0506785, 31.3206988], [30.0501167, 31.3208329], [30.0488583, 31.3214605], [30.0478043, 31.3223618], [30.0462673, 31.3239389], [30.0444377, 31.3257038], [30.0436622, 31.3263958], [30.0433975, 31.327297], [30.0436529, 31.3292711], [30.0443494, 31.3358962], [30.044837, 31.3400536], [30.0452735, 31.3439482], [30.0455336, 31.346566], [30.0462951, 31.3539528], [30.0462022, 31.3542639], [30.044916, 31.3556962], [30.0445631, 31.3560288], [30.0436436, 31.3560449], [30.039102, 31.355546], [30.036441, 31.3552027], [30.0327443, 31.3547575], [30.0293447, 31.3543444], [30.02601, 31.3539474], [30.0252158, 31.353926], [30.0246909, 31.3541352], [30.0242776, 31.3545804], [30.0239664, 31.35531], [30.0238503, 31.3556802], [30.0239803, 31.3569086], [30.0242451, 31.3580459], [30.0247606, 31.3609534], [30.0245795, 31.3621014], [30.0233765, 31.3666558], [30.0221132, 31.3717627], [30.0207662, 31.3768374], [30.019605, 31.3814401], [30.0190523, 31.3837682], [30.0179793, 31.3879579], [30.017041, 31.3917988], [30.0163815, 31.394261], [30.0161492, 31.3956343], [30.0161492, 31.3976567], [30.0162282, 31.4011436], [30.0162375, 31.4058428], [30.0162328, 31.4117651], [30.0161771, 31.4147853], [30.0161817, 31.4161211], [30.0162421, 31.4206325], [30.0162235, 31.4260077], [30.0162886, 31.4286255], [30.0162142, 31.4301544], [30.0162561, 31.4313345], [30.016335, 31.4339041], [30.0162235, 31.4366668], [30.0162375, 31.4394509], [30.0162514, 31.4431953], [30.0162793, 31.4450245], [30.016414, 31.445797], [30.0174312, 31.4471328], [30.0193635, 31.4494448], [30.0212771, 31.4515369], [30.0230003, 31.4537256], [30.0243101, 31.4551257], [30.025383, 31.4574163], [30.0255595, 31.4596426], [30.0254619, 31.4633226], [30.0254294, 31.4672708], [30.0254201, 31.4705163], [30.0254062, 31.4743786], [30.0254109, 31.4784717], [30.0253737, 31.4825272], [30.0253969, 31.4848124], [30.025318, 31.4862179], [30.0253923, 31.4883851], [30.0253644, 31.4926498], [30.0253412, 31.4962601], [30.0252854, 31.497789], [30.0249743, 31.4991676], [30.0238921, 31.5018927], [30.0224104, 31.5051811], [30.0199348, 31.5099179], [30.0185692, 31.5120744], [30.0168785, 31.5147083], [30.0150112, 31.5173959], [30.013325, 31.5195899], [30.0121916, 31.5209418], [30.011597, 31.5216231], [30.0113648, 31.5222292], [30.0114345, 31.5228247], [30.0116667, 31.5231734], [30.0138267, 31.5248095], [30.0156987, 31.5259736], [30.0180072, 31.5271377], [30.0202692, 31.5279745], [30.0228331, 31.5286344], [30.0253133, 31.5289938], [30.0266649, 31.5293639], [30.0268924, 31.5296643], [30.0270178, 31.5302008], [30.0270875, 31.5331995], [30.0270039, 31.5397709], [30.0269714, 31.5441483], [30.0269668, 31.5491103], [30.026925, 31.5540724], [30.0269187, 31.5568133], [30.0269349, 31.5603887], [30.0268792, 31.5655546], [30.0268142, 31.570447], [30.0267816, 31.5772598], [30.0268188, 31.5809183], [30.0267027, 31.5828388], [30.0264612, 31.5843247], [30.0257134, 31.5865242], [30.0223925, 31.5924465], [30.0214404, 31.5941416], [30.021171, 31.5951448], [30.0212917, 31.5962659], [30.0220581, 31.597194], [30.02406, 31.5984546], [30.0258992, 31.5994202], [30.0265912, 31.599844], [30.0279102, 31.6012119], [30.0287787, 31.6021775], [30.0292478, 31.6029768], [30.0293105, 31.6035146], [30.0292803, 31.6039773], [30.0291364, 31.6045929], [30.0287021, 31.6052822], [30.0278684, 31.6063014], [30.026013, 31.6088093], [30.0246823, 31.6107968], [30.0231821, 31.6132564], [30.0217376, 31.6161907], [30.0203628, 31.6190875], [30.0190437, 31.6226227], [30.0179846, 31.6261739], [30.0170835, 31.6299451], [30.0163821, 31.6344029], [30.016122, 31.6391719], [30.0161127, 31.641956], [30.0161801, 31.6441474], [30.0163357, 31.6462824], [30.0166423, 31.6489083], [30.0170138, 31.6522289], [30.0175619, 31.6569657], [30.0182494, 31.6633386], [30.0194896, 31.6747702], [30.0193688, 31.6794587], [30.0188764, 31.6830958], [30.0177617, 31.688031], [30.0165494, 31.6912121], [30.0154949, 31.6944737], [30.0148586, 31.6971827], [30.014199, 31.6996074], [30.0138367, 31.7021609], [30.0135208, 31.7043013], [30.013256, 31.7055297], [30.0125825, 31.7068709], [30.01183, 31.7081637], [30.0110403, 31.7095906], [30.0093308, 31.7125089], [30.0085272, 31.7141128], [30.0081649, 31.7153788], [30.0081138, 31.7217786], [30.0081324, 31.7254103], [30.0080813, 31.7293531], [30.0079883, 31.7353881], [30.0079512, 31.7404628], [30.0079837, 31.7430753], [30.0080023, 31.7447544], [30.0079744, 31.7461384], [30.0077282, 31.7466534], [30.0072126, 31.7469109], [30.0047784, 31.7468948], [30.002516, 31.7467875], [30.0019353, 31.7468519], [30.0003186, 31.747281], [29.9982001, 31.7480374], [29.9963418, 31.7491693], [29.9940513, 31.7513204], [29.9937726, 31.7520875], [29.9940188, 31.7527527], [29.9961606, 31.7558534], [29.9982512, 31.7588467], [30.0002768, 31.7618347], [30.0024324, 31.7649192], [30.0048899, 31.7684919], [30.0063764, 31.7704285]],
    mono2: [[29.9081474, 30.8413593], [29.9096494, 30.8437893], [29.9110862, 30.8460692], [29.9137598, 30.8500818], [29.9157174, 30.8531288], [29.9168472, 30.8546362], [29.9177027, 30.8554623], [29.9185862, 30.855988], [29.9196416, 30.8568302], [29.9206459, 30.8583859], [29.9229636, 30.8620525], [29.9248094, 30.864901], [29.9265947, 30.867712], [29.928524, 30.870716], [29.9312437, 30.8749325], [29.9333032, 30.8781297], [29.9356368, 30.8816595], [29.9370686, 30.8838267], [29.9393697, 30.8874047], [29.941759, 30.891133], [29.9440925, 30.8947111], [29.9481179, 30.9008963], [29.9505791, 30.9046567], [29.9530425, 30.9084708], [29.9549017, 30.9112979], [29.9567375, 30.9140713], [29.9587267, 30.9171612], [29.960214, 30.919425], [29.960939, 30.9206427], [29.9612225, 30.9215439], [29.9616222, 30.923105], [29.9619661, 30.9239686], [29.962468, 30.9248484], [29.9634068, 30.9261895], [29.9649265, 30.9285552], [29.9653959, 30.9293706], [29.9657863, 30.9298802], [29.9663625, 30.9302986], [29.9670457, 30.9307922], [29.9678822, 30.9314198], [29.9685468, 30.9322942], [29.9692159, 30.9333027], [29.9705311, 30.9353573], [29.971981, 30.9375889], [29.9734912, 30.9398419], [29.9749457, 30.9420521], [29.9765535, 30.9445841], [29.9793509, 30.9489132], [29.9813257, 30.9519816], [29.981795, 30.952502], [29.9822225, 30.9526093], [29.9825942, 30.9525234], [29.9834585, 30.9518582], [29.983886, 30.9516061], [29.9844575, 30.9514398], [29.9850987, 30.9514881], [29.9865205, 30.9516812], [29.9877657, 30.9518636], [29.9887135, 30.9520084], [29.9892432, 30.9522606], [29.9896381, 30.9525932], [29.9902468, 30.9535266], [29.99224, 30.9565682], [29.9944422, 30.9600229], [29.9969463, 30.9638155], [29.9989951, 30.9670878], [30.0018755, 30.9714008], [30.003743, 30.9743244], [30.0059496, 30.9777952], [30.0071946, 30.9796459], [30.008277, 30.9817327], [30.0090945, 30.9829558], [30.0093733, 30.9838463], [30.0093825, 30.9847528], [30.0091735, 30.9860832], [30.0089827, 30.9875162], [30.0086668, 30.9893884], [30.0086018, 30.99059], [30.0086668, 30.9912499], [30.0089037, 30.9921028], [30.0096563, 30.9934171], [30.0110545, 30.9954556], [30.0134584, 30.9992267], [30.0155393, 31.0023864], [30.0180012, 31.0062166], [30.0204722, 31.0100253], [30.0225298, 31.0131152], [30.0244573, 31.0160764], [30.02599, 31.0184314], [30.0270722, 31.0199924], [30.0293526, 31.0236241], [30.0315447, 31.0269018], [30.0337553, 31.0303457], [30.0355898, 31.0330816], [30.0372152, 31.035619], [30.0393421, 31.0392829], [30.0415943, 31.0434296], [30.0430478, 31.0458811], [30.0441066, 31.048161], [30.0447056, 31.0491158], [30.0450492, 31.0496952], [30.0451468, 31.0499205], [30.04543, 31.052018], [30.0454904, 31.0523613], [30.0457597, 31.0528548], [30.0468045, 31.0543193], [30.04797, 31.055639], [30.0487083, 31.0567333], [30.0492423, 31.0576774], [30.049702, 31.0586538], [30.0507793, 31.0615291], [30.0522326, 31.0653593], [30.0538299, 31.0695382], [30.0545868, 31.0716893], [30.0557522, 31.0746397], [30.0572055, 31.0785933], [30.058668, 31.0821928], [30.060098, 31.0857977], [30.060892, 31.0878147], [30.0612402, 31.0888715], [30.0614909, 31.0897352], [30.0618716, 31.0913928], [30.062178, 31.0929753], [30.0623173, 31.0939946], [30.0625309, 31.0968109], [30.062568, 31.0994985], [30.0627073, 31.1012043], [30.0629023, 31.1019822], [30.063102, 31.105807], [30.0634502, 31.1097606], [30.0637705, 31.1141648], [30.063998, 31.1172547], [30.064518, 31.1240943], [30.0647501, 31.1258377], [30.0652376, 31.128536], [30.0653444, 31.1300917], [30.0654558, 31.1311163], [30.0656833, 31.1320336], [30.0659619, 31.1328383], [30.066454, 31.135601], [30.0667465, 31.1379345], [30.0668532, 31.1397101], [30.0668672, 31.1416252], [30.0667975, 31.1440875], [30.0664076, 31.1468824], [30.0657715, 31.1505409], [30.064894, 31.1560662], [30.0641791, 31.1605777], [30.0637705, 31.1631687], [30.063218, 31.1668702], [30.0627677, 31.1700459], [30.0626748, 31.1706145], [30.0624659, 31.1720173], [30.0626493, 31.1729239], [30.063297, 31.1738037], [30.0637984, 31.1746218], [30.064525, 31.1746593], [30.0656369, 31.1746808], [30.0669531, 31.1747827], [30.0668881, 31.175869], [30.0667929, 31.1773254], [30.0667488, 31.1782213], [30.0666025, 31.1793344], [30.0664168, 31.1807077], [30.0661963, 31.1828561], [30.0659665, 31.1843957], [30.0659456, 31.1852701], [30.0660477, 31.1861821], [30.0649567, 31.1865254], [30.0636011, 31.1868231], [30.0622593, 31.1872416], [30.0606482, 31.1876895], [30.0597777, 31.1880248], [30.0594457, 31.1888321], [30.05926, 31.189787], [30.059325, 31.1907982], [30.0595989, 31.1920132], [30.0597846, 31.1939819], [30.059968, 31.1958461], [30.0602629, 31.1974393], [30.0603418, 31.1982842], [30.060495, 31.2005534]],
    lrt1: [[30.1469943, 31.4198489], [30.1469386, 31.4240867], [30.148488, 31.4295692], [30.1531266, 31.4452547], [30.1586185, 31.4657039], [30.1629227, 31.4814967], [30.1657612, 31.4961094], [30.1678575, 31.5134258], [30.170028, 31.5315789], [30.1718089, 31.5450115], [30.1731445, 31.5540237], [30.1745914, 31.5666837], [30.1760198, 31.5780777], [30.1780973, 31.5948576], [30.1795998, 31.6060371], [30.1815104, 31.6225809], [30.1828644, 31.6331381], [30.1836064, 31.6390819], [30.1838846, 31.6477508], [30.183866, 31.6527719], [30.1838011, 31.6567094], [30.1820112, 31.6686291], [30.1802861, 31.6819436], [30.1787744, 31.6942925], [30.1777634, 31.7025108], [30.1767247, 31.7096884], [30.1751015, 31.7160935], [30.1739885, 31.7210931], [30.1728681, 31.7253314], [30.1714212, 31.731184], [30.1700577, 31.7371439], [30.1674698, 31.7486023], [30.1661527, 31.7541598], [30.1658744, 31.757239], [30.1661538, 31.7590428], [30.1674014, 31.7634523], [30.1687093, 31.7678189], [30.1694189, 31.7702168], [30.1697899, 31.772325], [30.1698641, 31.7742938], [30.1696832, 31.7758119], [30.1691638, 31.7782903], [30.1684867, 31.7807096], [30.1675266, 31.7845184], [30.1669816, 31.7869135], [30.1670465, 31.7909798], [30.1670419, 31.7937907], [30.1665595, 31.7960545], [30.1655763, 31.7982486], [30.1639298, 31.8004641], [30.1624966, 31.8015316], [30.1604605, 31.8027225], [30.1566061, 31.8047073], [30.1528675, 31.8054691], [30.1497503, 31.8059089], [30.1465171, 31.8064722], [30.1429961, 31.8070087], [30.1405374, 31.8070569], [30.1368446, 31.8068263], [30.1326692, 31.8064722], [30.1257932, 31.8059894], [30.1206382, 31.8055603], [30.116411, 31.8051526], [30.1141744, 31.8041977], [30.1120723, 31.8035057], [30.1109168, 31.803393], [30.1092044, 31.8035808], [30.1072693, 31.8037417], [30.1035149, 31.8033823], [30.0967065, 31.8024543], [30.092766, 31.8014189], [30.0898976, 31.8006143], [30.0874283, 31.7996594], [30.0853535, 31.7983934], [30.083339, 31.7964515], [30.0826056, 31.7955395], [30.0812733, 31.7932704], [30.0790266, 31.7886999], [30.0770305, 31.7847356], [30.0747652, 31.7802241], [30.0720169, 31.7745915], [30.0636277, 31.7576723], [30.0581862, 31.7465572], [30.0551404, 31.740828], [30.0530231, 31.737781], [30.0494942, 31.7336611], [30.046058, 31.7306785], [30.0413029, 31.7274599], [30.0379128, 31.7259793], [30.0330552, 31.7239515], [30.0297113, 31.7227821], [30.0284852, 31.722589], [30.0274727, 31.7225675], [30.0262001, 31.7227606], [30.0246767, 31.7234687], [30.0233484, 31.7242412], [30.022661, 31.7245094], [30.021797, 31.7247777], [30.0207752, 31.7249493], [30.0192238, 31.7249922], [30.0117082, 31.7249708], [30.0105655, 31.7252819], [30.0095157, 31.7262046], [30.0089211, 31.7273955], [30.0082336, 31.7291765], [30.007193, 31.7310326], [30.0062361, 31.7322342], [30.0051676, 31.7329316], [30.0042014, 31.7331461], [30.0028541, 31.7329316], [30.0020272, 31.7324917], [30.001126, 31.7315583], [30.000234, 31.7303781], [29.9991469, 31.7292516], [29.9979762, 31.7284255], [29.9963129, 31.7276744], [29.993832, 31.726859], [29.9907563, 31.7257325], [29.9887677, 31.7246596], [29.9851622, 31.7220847], [29.9829504, 31.7199497], [29.9792517, 31.7154865], [29.9753113, 31.7106907], [29.9725882, 31.7071609], [29.9709152, 31.7045753], [29.9700695, 31.7019681], [29.9690099, 31.6953914], [29.9684987, 31.6933958], [29.9678202, 31.6920225], [29.9669372, 31.6906492], [29.9658219, 31.6895549], [29.9642511, 31.688364], [29.9627267, 31.6878275], [29.9611745, 31.6874628], [29.9588878, 31.6871087], [29.9557274, 31.6868834], [29.9524646, 31.6865615], [29.9509401, 31.6864972], [29.9488484, 31.6866796], [29.9461432, 31.6874842], [29.9432705, 31.6889433], [29.9402026, 31.6909282], [29.9325477, 31.6958375], [29.9289215, 31.6981549], [29.9263924, 31.6993888], [29.9226823, 31.7006011], [29.918349, 31.7016204], [29.9165636, 31.7017706], [29.9150478, 31.7016633], [29.9123695, 31.7010088], [29.9084729, 31.6992278], [29.9047807, 31.6975327], [29.9006885, 31.6956015], [29.89854, 31.6948183], [29.8965031, 31.6947003], [29.8942336, 31.6947432], [29.8924849, 31.695344], [29.8909036, 31.6964598], [29.88982, 31.6989006], [29.8890665, 31.7021836], [29.8879689, 31.7050697], [29.8862527, 31.7109598], [29.884662, 31.7173006]],
    lrt2: [[30.1747287, 31.7163137], [30.1741351, 31.7196503], [30.173727, 31.7218765], [30.1739635, 31.7241993], [30.1746684, 31.7256584], [30.1754104, 31.7264095], [30.1764816, 31.7270854], [30.1781743, 31.7277935], [30.1793985, 31.7286893], [30.1802704, 31.7297676], [30.1816151, 31.7313179], [30.1831315, 31.7320904], [30.1844484, 31.7323532], [30.1858952, 31.7319777], [30.1871935, 31.7310819], [30.1900405, 31.728566], [30.1939029, 31.7251327], [30.1975889, 31.7218926], [30.2008019, 31.7190066], [30.202879, 31.716598], [30.2048447, 31.7143288], [30.2070097, 31.7119256], [30.2091376, 31.7100427], [30.2115807, 31.7077789], [30.2142416, 31.7053649], [30.2171064, 31.7028383], [30.2199062, 31.7004458], [30.2225576, 31.6984931], [30.2254314, 31.6962991], [30.2275311, 31.694266], [30.2303723, 31.6917501], [30.2315669, 31.6906541], [30.2333467, 31.6890233]],
    brt1: [[30.01, 31.18], [30.03, 31.2], [30.05, 31.23]],
    cta1: [[30.02, 31.19], [30.04, 31.22], [30.06, 31.25]]
  };

  const colors = {
    bus1: 'green',
    bus2: 'green',
    bus3: 'goldenrod',
    metro1: 'blue',
    metro2: 'red',
    metro3: 'green',
    metro4: 'purple',
    mono1: '#009ABD',
    mono2: '#CF0B23',
    lrt1: 'yellow',
    lrt2: 'yellow',
    brt1: 'orange',
    cta1: 'blue'
  };

  const routeData = {
    bus: {
      'Green Bus': [
        { id: 'bus1', name: 'G1', color: 'green', description: 'ÿ±ŸÖÿ≥Ÿäÿ≥, ÿπÿ®ÿßÿ≥ ÿßŸÑÿπŸÇÿßÿØ, ÿßŸÑÿ¨Ÿäÿ≤ÿ©, ÿ≤ŸàŸäŸÑ' },
        { id: 'bus2', name: 'G2', color: 'green', description: 'ÿßŸÑÿ™ÿ≠ÿ±Ÿäÿ±, ÿ≤ŸÖÿßŸÑŸÉ, ÿ£ŸÉÿ™Ÿàÿ®ÿ±, ÿßŸÑŸÖÿπÿßÿØŸä' }
      ],
      'Yellow Bus': [
        { id: 'bus3', name: 'Y1', color: 'goldenrod', description: 'ÿ¥ÿ®ÿ±ÿß, ÿßŸÑŸÖÿ∑ÿ±Ÿäÿ©, ÿπÿ≤ÿ®ÿ© ÿßŸÑŸÜÿÆŸÑ, ÿßŸÑŸÖÿ±ÿ¨' }
      ]
    },
    brt: {
      'Express Route': [
        { id: 'brt1', name: 'Line A', color: 'orange', description: 'ÿ£ŸÉÿ™Ÿàÿ®ÿ±, ÿ≤ÿßŸäÿØ, ÿßŸÑÿØŸÇŸä, Ÿàÿ≥ÿ∑ ÿßŸÑÿ®ŸÑÿØ' }
      ]
    },
    cta: {
      'Main Line': [
        { id: 'cta1', name: 'CTA 1', color: 'blue', description: 'ÿ±ŸÖÿ≥Ÿäÿ≥, ŸÖÿµÿ± ÿßŸÑÿ¨ÿØŸäÿØÿ©, ÿßŸÑŸÖÿ∑ÿ±Ÿäÿ©, ÿßŸÑÿπÿßÿ¥ÿ±' }
      ]
    },
    metro: {
      'Line 1': [
        { id: 'metro1', name: 'Main Metro', color: 'blue', description: 'ÿßŸÑŸÖÿ±ÿ¨, ÿßŸÑÿ¥ŸáÿØÿßÿ°, ÿßŸÑÿ≥ÿßÿØÿßÿ™, ÿ≠ŸÑŸàÿßŸÜ' }
      ],
      'Line 2': [
        { id: 'metro2', name: 'Main Metro', color: 'red', description: 'ÿ¥ÿ®ÿ±ÿß ÿßŸÑÿÆŸäŸÖÿ©, ÿßŸÑÿ¥ŸáÿØÿßÿ°, ÿßŸÑÿ≥ÿßÿØÿßÿ™, ÿßŸÑŸÖŸÜŸäÿ®' }
      ],
      'Line 3': [
        { id: 'metro3', name: 'Main Metro', color: 'green', description: 'ÿπÿØŸÑŸä ŸÖŸÜÿµŸàÿ±, ÿßŸÑÿπÿ®ÿßÿ≥Ÿäÿ©, ŸÜÿßÿµÿ±, ÿ¨ÿßŸÖÿπÿ© ÿßŸÑŸÇÿßŸáÿ±ÿ©' }
      ],
      'Line 4': [
        { id: 'metro4', name: 'Main Metro', color: 'purple', description: 'ÿπÿØŸÑŸä ŸÖŸÜÿµŸàÿ±, ÿßŸÑÿπÿ®ÿßÿ≥Ÿäÿ©, ŸÜÿßÿµÿ±, ÿ¨ÿßŸÖÿπÿ© ÿßŸÑŸÇÿßŸáÿ±ÿ©' }
      ]
    },
    tram: {
      'Line 1': [
        { id: 'tram1', name: 'Tram', color: 'blue', description: 'ÿ≠ŸÑŸàÿßŸÜ, ÿßŸÑÿ≥ŸäÿØÿ© ÿ≤ŸäŸÜÿ®, ÿßŸÑÿ¥ŸáÿØÿßÿ°, ÿßŸÑŸÖÿ±ÿ¨' }
      ]
    },
    mini: {
      'Line 1': [
        { id: 'mini1', name: 'Minibus', color: 'blue', description: 'ÿ≠ŸÑŸàÿßŸÜ, ÿßŸÑÿ≥ŸäÿØÿ© ÿ≤ŸäŸÜÿ®, ÿßŸÑÿ¥ŸáÿØÿßÿ°, ÿßŸÑŸÖÿ±ÿ¨' }
      ]
    },
    micro: {
      'Line 1': [
        { id: 'micro1', name: 'Microbus', color: 'blue', description: 'ÿ≠ŸÑŸàÿßŸÜ, ÿßŸÑÿ≥ŸäÿØÿ© ÿ≤ŸäŸÜÿ®, ÿßŸÑÿ¥ŸáÿØÿßÿ°, ÿßŸÑŸÖÿ±ÿ¨' }
      ]
    },
    monorail: {
      'East': [
        { id: 'mono1', name: 'Monorail', color: '#009ABD', description: 'ÿ≠ŸÑŸàÿßŸÜ, ÿßŸÑÿ≥ŸäÿØÿ© ÿ≤ŸäŸÜÿ®, ÿßŸÑÿ¥ŸáÿØÿßÿ°, ÿßŸÑŸÖÿ±ÿ¨' }
      ],
      'West': [
        { id: 'mono2', name: 'Monorail', color: '#CF0B23', description: 'ÿ≠ŸÑŸàÿßŸÜ, ÿßŸÑÿ≥ŸäÿØÿ© ÿ≤ŸäŸÜÿ®, ÿßŸÑÿ¥ŸáÿØÿßÿ°, ÿßŸÑŸÖÿ±ÿ¨' }
      ]
    },
    hst: {
      'Line 1': [
        { id: 'hst1', name: 'HST', color: 'blue', description: 'ÿ≠ŸÑŸàÿßŸÜ, ÿßŸÑÿ≥ŸäÿØÿ© ÿ≤ŸäŸÜÿ®, ÿßŸÑÿ¥ŸáÿØÿßÿ°, ÿßŸÑŸÖÿ±ÿ¨' }
      ]
    },
    lrt: {
      'Main': [
        { id: 'lrt1', name: 'LRT', color: 'yellow', description: 'ÿ≠ŸÑŸàÿßŸÜ, ÿßŸÑÿ≥ŸäÿØÿ© ÿ≤ŸäŸÜÿ®, ÿßŸÑÿ¥ŸáÿØÿßÿ°, ÿßŸÑŸÖÿ±ÿ¨' }
      ],
      '10th of Ramadan Branch': [
        { id: 'lrt2', name: 'LRT', color: 'yellow', description: 'ÿ≠ŸÑŸàÿßŸÜ, ÿßŸÑÿ≥ŸäÿØÿ© ÿ≤ŸäŸÜÿ®, ÿßŸÑÿ¥ŸáÿØÿßÿ°, ÿßŸÑŸÖÿ±ÿ¨' }
      ]
    }
  };

  let pinnedRoutes = {};
  let activeRoute = null;
  let activeRouteLayer = null;

  function showSingleRoute(key) {
    if (activeRoute && !pinnedRoutes[activeRoute] && activeRouteLayer) {
      map.removeLayer(activeRouteLayer);
    }
    const color = colors[key];
    if (!pinnedRoutes[key]) {
      activeRouteLayer = L.polyline(routes[key], {
        color,
        weight: 5,
        className: 'active-route'
      }).addTo(map);
      activeRoute = key;
      map.fitBounds(activeRouteLayer.getBounds());
    }
  }

  function togglePin(btn, key) {
    const pinned = btn.classList.toggle("pinned");
    if (pinned) {
      const color = colors[key];
      const line = L.polyline(routes[key], {
        color,
        weight: 5,
        className: 'active-route'
      }).addTo(map);
      pinnedRoutes[key] = line;
    } else {
      map.removeLayer(pinnedRoutes[key]);
      delete pinnedRoutes[key];
    }
  }

  function openMenu(type) {
  const titleMap = {
    bus: 'üöå Bus',
    metro: 'üöá Metro',
    brt: 'üöç BRT',
    cta: 'üöÜ CTA Lines',
    tram: 'üöã Tram Lines',
    mini: 'üöê Mini Bus Lines',
    micro: 'üöê Micro Bus Lines',
    monorail: 'üöù Monorail Lines',
    hst: 'üöÖ High-Speed-Train Lines',
    lrt: 'üöà Light-Rail-Train Lines',
  };

  document.getElementById('menu-title').textContent = titleMap[type];
  document.getElementById('menu-panel').style.display = 'flex';

  renderRoutes(type); // Initial render

  // Update routes on input
  document.querySelector('.search-box').oninput = (e) => {
    renderRoutes(type, e.target.value);
  };
}

function renderRoutes(type, filter = '') {
  const contentPanel = document.getElementById('menu-content-panel');
  contentPanel.innerHTML = '';
  const data = routeData[type];

  for (const category in data) {
    const groupMatches = category.toLowerCase().includes(filter.toLowerCase());
    const routes = data[category];

    const matchedRoutes = routes.filter(route =>
      route.name.toLowerCase().includes(filter.toLowerCase()) ||
      route.description.toLowerCase().includes(filter.toLowerCase())
    );

    // Skip this group if it doesn't match and has no matching children
    if (!groupMatches && matchedRoutes.length === 0) continue;

    const details = document.createElement('details');
    details.open = true;

    const summary = document.createElement('summary');
    summary.textContent = category;
    details.appendChild(summary);

    (groupMatches ? routes : matchedRoutes).forEach(route => {
      const card = document.createElement('div');
      card.className = 'route-card';
      card.setAttribute('data-name', route.name.toLowerCase());
      card.setAttribute('data-description', route.description.toLowerCase());

      const btnRow = document.createElement('div');
      btnRow.className = 'route-btn';

      const routeBtn = document.createElement('button');
      routeBtn.textContent = route.name;
      routeBtn.style.background = route.color;
      routeBtn.onclick = () => showSingleRoute(route.id);

      const pinBtn = document.createElement('button');
      pinBtn.textContent = 'üìå';
      pinBtn.className = 'pin-btn';
      pinBtn.onclick = () => togglePin(pinBtn, route.id);

      const likeBtn = document.createElement('button');
      likeBtn.textContent = '‚ù§Ô∏è';
      likeBtn.className = 'like-btn';
      likeBtn.onclick = () => {
      toggleLike(route);
      likeBtn.classList.toggle('liked', !!likedRoutes[route.id]);
      };
      if (likedRoutes[route.id]) {
      likeBtn.classList.add('liked');
      }

      btnRow.appendChild(routeBtn);
      btnRow.appendChild(pinBtn);
      btnRow.appendChild(likeBtn);

      const desc = document.createElement('div');
      desc.className = 'route-description';
      desc.textContent = route.description;

      card.appendChild(btnRow);
      card.appendChild(desc);
      details.appendChild(card);
    });

    contentPanel.appendChild(details);
  }
  
  }
  function closeMenu() {
  document.getElementById('menu-panel').style.display = 'none';
}

function locateMe() {
  if (!navigator.geolocation) {
    alert("Geolocation not supported.");
    return;
  }
  navigator.geolocation.getCurrentPosition(pos => {
    const { latitude, longitude } = pos.coords;
    L.marker([latitude, longitude]).addTo(map).bindPopup("You are here").openPopup();
    map.setView([latitude, longitude], 14);
  }, () => {
    alert("Unable to retrieve location.");
  });
}
function toggleTheme() {
  document.body.classList.toggle("dark");
  if (document.body.classList.contains("dark")) {
    map.removeLayer(lightLayer);
    darkLayer.addTo(map);
  } else {
    map.removeLayer(darkLayer);
    lightLayer.addTo(map);
  }
}
  function toggleLike(route) {
  if (likedRoutes[route.id]) {
    delete likedRoutes[route.id];
  } else {
    likedRoutes[route.id] = route;
  }
}
  
</script>
</body>
</html>
